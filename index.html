<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Piano Metronome</title>
    <meta name="description" content="Advanced rhythm training for musicians with professional metronome features">
    <meta name="theme-color" content="#00d4ff">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0idXJsKCNncmFkaWVudDBfbGluZWFyXzFfMSkiLz4KPHBhdGggZD0iTTE2IDhDMTIuMzE0NyA4IDkgMTEuMzE0NyA5IDE1VjI0QzkgMjcuMzE0NyAxMi4zMTQ3IDMxIDE2IDMxQzE5LjY4NTMgMzEgMjMgMjcuMzE0NyAyMyAyNFYxNUMyMyAxMS4zMTQ3IDE5LjY4NTMgOCAxNiA4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE2IDEwQzEzLjc5MDkgMTAgMTIgMTEuNzkwOSAxMiAxNFYyMkMxMiAyNC4yMDkxIDEzLjc5MDkgMjYgMTYgMjZDMThuMjA5MSAyNiAyMCAyNC4yMDkxIDIwIDIyVjE0QzIwIDExLjc5MDkgMTguMjA5MSAxMCAxNiAxMFoiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8yXzEpIi8+CjxwYXRoIGQ9Ik0xNiAxMkMxNC44OTU0IDEyIDE0IDEyLjg5NTQgMTQgMTRWMjJDMTRgMjMuMTA0NiAxNC44OTU0IDI0IDE2IDI0QzE3LjEwNDYgMjQgMTggMjMuMTA0NiAxOCAyMlYxNEMxOCAxMi44OTU0IDE3LjEwNDYgMTIgMTYgMTJaIiBmaWxsPSJ1cmwoI2dyYWRpZW50MF9saW5lYXJfM18xKSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDBfbGluZWFyXzFfMSIgeDE9IjAiIHkxPSIwIiB4Mj0iMzIiIHkyPSIzMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDBkNGZmIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmNmI5ZCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMl8xIiB4MT0iMTYiIHkxPSIxMCIgeDI9IjE2IiB5Mj0iMjYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzAwZDRmZiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZjZiOGRkIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQwX2xpbmVhcl8zXzEiIHgxPSIxNiIgeTE9IjEyIiB4Mj0iMTYiIHkyPSIyNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWN2b3I9IiMwMGQ0ZmYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmY2YjlkIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="bg-orbs">
        <div class="orb orb1"></div>
        <div class="orb orb2"></div>
    </div>
    <div class="container">
        <!-- Fullscreen toggle -->
        <button class="fullscreen-toggle" id="fullscreenBtn" aria-label="Enter fullscreen" title="Fullscreen" onclick="toggleFullscreen()">‚§¢ Fullscreen</button>
        <div class="fullscreen-theme-bg"></div>
        <!-- Mobile controls toggle -->
        <button class="mobile-controls-toggle" onclick="toggleMobileControls()" aria-label="Open metronome controls">
            ‚öôÔ∏è
        </button>
        
        <!-- Mobile overlay -->
        <div class="mobile-overlay" onclick="closeMobileControls()"></div>
        
        <div class="header">
            <h1>Professional Piano Metronome</h1>
            <p class="subtitle">Advanced rhythm training for musicians</p>
        </div>

        <div class="main-grid">
            <div class="metronome-section card-3d">
                <div class="tempo-display">
                    <div class="bpm-value" id="bpmDisplay">120</div>
                    <div class="bpm-label">BPM</div>
                </div>

                <div class="visual-metronome">
                    <div class="pendulum-container">
                        <div class="fs-theme-bg"></div>
                        <div class="pendulum-glow"></div>
                        <div class="pendulum" id="pendulum">
                            <div class="pendulum-bob"></div>
                        </div>
                    </div>
                </div>

                <div class="beat-indicator" id="beatIndicator">
                    <div class="beat-dot"></div>
                    <div class="beat-dot"></div>
                    <div class="beat-dot"></div>
                    <div class="beat-dot"></div>
                </div>

                <div class="tempo-controls">
                    <button id="tempoDown" class="tempo-btn" onclick="adjustTempo(-5)" aria-label="Decrease tempo by 5 BPM">‚àí</button>
                    <input type="range" class="tempo-slider" id="tempoSlider" min="40" max="500" value="120" aria-label="Tempo slider">
                    <input type="number" class="tempo-input" id="tempoInput" min="40" max="500" value="120" aria-label="Tempo input">
                    <button id="tempoUp" class="tempo-btn" onclick="adjustTempo(5)" aria-label="Increase tempo by 5 BPM">+</button>
                </div>

                <button class="play-stop-btn" id="playStopBtn" onclick="toggleMetronome()" aria-label="Start or stop the metronome">START</button>
            </div>

            <div class="side-column">
            <div class="controls-panel card-3d">
                <div class="control-group">
                    <label class="control-label">Theme</label>
                    <div class="theme-group" role="tablist" aria-label="Theme selector">
                        <button class="theme-option theme-ocean selected" role="tab" aria-selected="true" onclick="setTheme('ocean')" aria-label="Ocean theme">
                            <span class="icon">üåä</span><span>Ocean</span>
                        </button>
                        <button class="theme-option theme-sunset" role="tab" aria-selected="false" onclick="setTheme('sunset')" aria-label="Sunset theme">
                            <span class="icon">üåá</span><span>Sunset</span>
                        </button>
                        <button class="theme-option theme-aurora" role="tab" aria-selected="false" onclick="setTheme('aurora')" aria-label="Aurora theme">
                            <span class="icon">üåå</span><span>Aurora</span>
                        </button>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Time Signature</label>
                    <div class="control-select-wrapper">
                    <select class="control-select" id="timeSignature">
                        <option value="4/4">4/4</option>
                        <option value="3/4">3/4</option>
                        <option value="2/4">2/4</option>
                        <option value="6/8">6/8</option>
                        <option value="9/8">9/8</option>
                        <option value="12/8">12/8</option>
                        <option value="5/4">5/4</option>
                        <option value="7/8">7/8</option>
                    </select>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Subdivisions</label>
                    <div class="subdivision-grid">
                        <button class="subdivision-btn active" data-subdivision="quarter">‚ô© Quarter</button>
                        <button class="subdivision-btn" data-subdivision="eighth">‚ô´ Eighth</button>
                        <button class="subdivision-btn" data-subdivision="triplet">‚ô´‚ô´‚ô´ Triplet</button>
                        <button class="subdivision-btn" data-subdivision="sixteenth">‚ô¨ Sixteenth</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Sound</label>
                    <div class="control-select-wrapper">
                    <select class="control-select" id="soundSelect">
                        <option value="classic">Classic Click</option>
                        <option value="wood">Wood Block</option>
                        <option value="digital">Digital Beep</option>
                        <option value="rimshot">Rimshot</option>
                        <option value="clave">Clave</option>
                        <option value="hihat">Hi‚ÄëHat</option>
                        <option value="shaker">Shaker</option>
                        <option value="stick">Stick</option>
                        <option value="tick">Tick</option>
                        <option value="snap">Snap</option>
                    </select>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Volume</label>
                    <input type="range" class="control-input" id="volumeSlider" min="0" max="100" value="70">
                </div>

                <button class="tap-tempo-btn" onclick="tapTempo()">TAP TEMPO</button>

                <div class="control-group">
                    <label class="control-label">Accent Pattern</label>
                    <div class="accent-pattern" id="accentPattern"></div>
                    <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
                        <button class="preset-btn" onclick="setAccentMode('single')">Single</button>
                        <button class="preset-btn" onclick="setAccentMode('double')">Double</button>
                        <button class="preset-btn" onclick="setAccentMode('triple')">Triple</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">Presets</label>
                    <div style="display:flex; gap:10px;">
                        <input type="text" class="control-input" id="presetName" placeholder="Preset name" aria-label="Preset name">
                        <button class="preset-btn" onclick="savePreset()" aria-label="Save preset">Save</button>
                    </div>
                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <div class="control-select-wrapper" style="flex:1;">
                            <select class="control-select" id="presetList" aria-label="Preset list"></select>
                        </div>
                        <button class="preset-btn" onclick="loadPreset()" aria-label="Load preset">Load</button>
                    </div>
                </div>

                <div class="advanced-section">
                    <div class="control-group">
                        <label class="control-label">Keyboard Shortcuts</label>
                        <div style="font-size: 0.85rem; color: #b8bcc8; line-height: 1.4;">
                            <div><strong>Space:</strong> Start/Stop</div>
                            <div><strong>‚Üë/‚Üì:</strong> Fine tempo (¬±1)</div>
                            <div><strong>‚Üê/‚Üí:</strong> Coarse tempo (¬±5)</div>
                            <div><strong>T, Q, W, E, R, Enter:</strong> Tap tempo</div>
                            <div style="margin-top: 8px; font-size: 0.8rem; opacity: 0.8;">
                                On mobile: Tap the gear icon to access controls
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Tempo Presets</label>
                        <div class="tempo-presets">
                            <button class="tempo-preset-btn" onclick="setTempo(60)">Largo (60)</button>
                            <button class="tempo-preset-btn" onclick="setTempo(76)">Adagio (76)</button>
                            <button class="tempo-preset-btn" onclick="setTempo(108)">Andante (108)</button>
                            <button class="tempo-preset-btn" onclick="setTempo(120)">Moderato (120)</button>
                            <button class="tempo-preset-btn" onclick="setTempo(144)">Allegro (144)</button>
                            <button class="tempo-preset-btn" onclick="setTempo(180)">Presto (180)</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Polyrhythm</label>
                        <div class="polyrhythm-controls">
                            <input type="number" class="control-input" id="polyLeft" placeholder="3" min="2" max="16">
                            <input type="number" class="control-input" id="polyRight" placeholder="4" min="2" max="16">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timer panel separate on desktop -->
            <div class="timer-panel card-3d">
                <div class="control-label" style="margin-bottom:10px;">Practice Timer</div>
                <div class="timer">
                    <div class="timer-display" id="timerDisplay">00:00:00</div>
                    <div class="timer-controls">
                        <button class="timer-btn" id="timerStart" onclick="startPracticeTimer()">Start</button>
                        <button class="timer-btn" id="timerPause" onclick="pausePracticeTimer()">Pause</button>
                        <button class="timer-btn" id="timerReset" onclick="resetPracticeTimer()">Reset</button>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>